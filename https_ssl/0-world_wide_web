#!/usr/bin/env bash
# Script to display DNS information for subdomains of a given domain

# Function to display info for a single subdomain
get_subdomain_info() {
    local sub=$1
    local domain=$2
    local full_domain="${sub}.${domain}"
    # Get the A record IP
    local ip=$(dig +short $full_domain)
    echo "The subdomain ${sub} is a A record and points to ${ip}"
}

# Main script
DOMAIN=$1
SUBDOMAIN=$2

# Exact subdomains expected by ALU
SUBDOMAINS=("www" "lb-01" "web-01" "web-02")

if [ -z "$SUBDOMAIN" ]; then
    # Loop through all subdomains in the required order
    for sub in "${SUBDOMAINS[@]}"; do
        get_subdomain_info $sub $DOMAIN
    done
else
    # Only check the specified subdomain
    get_subdomain_info $SUBDOMAIN $DOMAIN
fi
