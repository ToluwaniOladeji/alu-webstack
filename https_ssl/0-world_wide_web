#!/usr/bin/env bash
# Script to display information about subdomains for a given domain

# Function to get subdomain info
get_subdomain_info() {
    local full_domain=$1
    # Get the IP address using dig +short
    local ip=$(dig +short $full_domain)
    # Extract only the subdomain name
    local subdomain=$(echo $full_domain | awk -F. '{print $1}')
    # Print in required format
    echo "The subdomain ${subdomain} is a A record and points to ${ip}"
}

DOMAIN=$1
SUBDOMAIN=$2

# Array of subdomains in required order
SUBDOMAINS=("www" "6929-lb-01" "6929-web-01" "6929-web-02")

if [ -z "$SUBDOMAIN" ]; then
    # Loop through all subdomains
    for sub in "${SUBDOMAINS[@]}"; do
        get_subdomain_info "$sub.$DOMAIN"
    done
else
    # Only check the specified subdomain
    get_subdomain_info "$SUBDOMAIN.$DOMAIN"
fi
